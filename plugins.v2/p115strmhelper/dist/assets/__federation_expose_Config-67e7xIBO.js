import{importShared as e}from"./__federation_fn_import-B6DyUTOO.js";import{_ as l}from"./_plugin-vue_export-helper-BCo6x5W8.js";const{resolveComponent:a,createVNode:t,createElementVNode:o,withCtx:n,toDisplayString:r,createTextVNode:i,openBlock:s,createBlock:d,createCommentVNode:c,renderList:u,Fragment:m,createElementBlock:p,withKeys:_}=await e("vue"),f={class:"plugin-config"},v={key:2,class:"my-1"},y={class:"d-flex flex-column"},h={class:"d-flex flex-column"},b={class:"path-selector flex-grow-1 mr-2"},g={class:"path-selector flex-grow-1 ml-2"},x={class:"d-flex flex-column"},V={class:"path-selector flex-grow-1 mr-2"},k={class:"path-selector flex-grow-1 ml-2"},w={class:"basic-config"},C={class:"d-flex flex-column"},U={class:"path-selector flex-grow-1 mr-2"},T={class:"path-selector flex-grow-1 ml-2"},S={class:"d-flex flex-column"},M={class:"d-flex flex-column"},z={class:"path-selector flex-grow-1 mr-2"},P={class:"path-selector flex-grow-1 ml-2"},R={class:"d-flex flex-column"},$={class:"path-selector flex-grow-1 mr-2"},L={class:"path-selector flex-grow-1 ml-2"},E={class:"d-flex flex-column"},I={class:"d-flex flex-column"},B={class:"path-selector flex-grow-1 mr-2"},q={class:"path-selector flex-grow-1 ml-2"},A={class:"d-flex flex-column"},j={class:"path-selector flex-grow-1 mr-2"},O={class:"path-selector flex-grow-1 ml-2"},K={class:"d-flex flex-column"},F={key:0,class:"d-flex justify-center my-3"},D={key:1},N={key:1,class:"d-flex flex-column align-center py-3"},J={key:2,class:"d-flex flex-column align-center"},G={class:"d-flex flex-column align-center mb-3"},W=["src"],H={class:"text-body-2 text-grey mb-1"},Z={class:"text-subtitle-2 font-weight-medium text-primary"},Q={key:3,class:"d-flex flex-column align-center py-3"},X={class:"text-caption mt-2 text-grey"},{ref:Y,reactive:ee,computed:le,onMounted:ae,watch:te}=await e("vue"),oe="P115StrmHelper",ne=l({__name:"Config",props:{api:{type:[Object,Function],required:!0},initialConfig:{type:Object,default:()=>({})}},emits:["save","close","switch"],setup(e,{emit:l}){const le=e,ne=l,re=Y(!0),ie=Y(!1),se=Y(!1);Y(!1);const de=Y("tab-transfer"),ce=Y([]),ue=Y(!1),me=ee({enabled:!1,notify:!1,strm_url_format:"pickcode",link_redirect_mode:"cookie",cookies:"",password:"",moviepilot_address:"",user_rmt_mediaext:"mp4,mkv,ts,iso,rmvb,avi,mov,mpeg,mpg,wmv,3gp,asf,m4v,flv,m2ts,tp,f4v",user_download_mediaext:"srt,ssa,ass",transfer_monitor_enabled:!1,transfer_monitor_scrape_metadata_enabled:!1,transfer_monitor_scrape_metadata_exclude_paths:"",transfer_monitor_paths:"",transfer_mp_mediaserver_paths:"",transfer_monitor_media_server_refresh_enabled:!1,transfer_monitor_mediaservers:[],timing_full_sync_strm:!1,full_sync_overwrite_mode:"never",full_sync_remove_unless_strm:!1,full_sync_auto_download_mediainfo_enabled:!1,full_sync_strm_log:!0,full_sync_batch_num:5e3,full_sync_process_num:128,cron_full_sync_strm:"0 */7 * * *",full_sync_strm_paths:"",increment_sync_strm_enabled:!1,increment_sync_auto_download_mediainfo_enabled:!1,increment_sync_cron:"0 * * * *",increment_sync_strm_paths:"",increment_sync_mp_mediaserver_paths:"",increment_sync_scrape_metadata_enabled:!1,increment_sync_scrape_metadata_exclude_paths:"",increment_sync_media_server_refresh_enabled:!1,increment_sync_mediaservers:[],monitor_life_enabled:!1,monitor_life_auto_download_mediainfo_enabled:!1,monitor_life_paths:"",monitor_life_mp_mediaserver_paths:"",monitor_life_media_server_refresh_enabled:!1,monitor_life_mediaservers:[],monitor_life_event_modes:[],monitor_life_scrape_metadata_enabled:!1,monitor_life_scrape_metadata_exclude_paths:"",share_strm_auto_download_mediainfo_enabled:!1,user_share_code:"",user_receive_code:"",user_share_link:"",user_share_pan_path:"/",user_share_local_path:"",clear_recyclebin_enabled:!1,clear_receive_path_enabled:!1,cron_clear:"0 */7 * * *",pan_transfer_enabled:!1,pan_transfer_paths:"",directory_upload_enabled:!1,directory_upload_mode:"compatibility",directory_upload_uploadext:"mp4,mkv,ts,iso,rmvb,avi,mov,mpeg,mpg,wmv,3gp,asf,m4v,flv,m2ts,tp,f4v",directory_upload_copyext:"srt,ssa,ass",directory_upload_path:[],cloudsaver_url:"",cloudsaver_username:"",cloudsaver_password:""}),pe=ee({text:"",type:"info"}),_e=Y([{local:"",remote:""}]),fe=Y([{local:"",remote:""}]),ve=Y([{local:"",remote:""}]),ye=Y([{local:"",remote:""}]),he=Y([{local:"",remote:""}]),be=Y([{local:"",remote:""}]),ge=Y([{local:"",remote:""}]),xe=Y([{path:""}]),Ve=Y([{path:""}]),ke=Y([{local:"",remote:""}]),we=Y([{path:""}]),Ce=Y([{src:"",dest_remote:"",dest_local:"",delete:!1}]),Ue=ee({show:!1,isLocal:!0,loading:!1,error:null,currentPath:"/",items:[],selectedPath:"",callback:null,type:"",index:-1,fieldKey:null,targetConfigKeyForExclusion:null,originalPathTypeBackup:"",originalIndexBackup:-1}),Te=ee({show:!1,loading:!1,error:null,qrcode:"",uid:"",time:"",sgin:"",tips:"请使用支付宝扫描二维码登录",status:"等待扫码",checkInterval:null,clientType:"alipaymini"}),Se=[{label:"支付宝",value:"alipaymini"},{label:"微信",value:"wechatmini"},{label:"安卓",value:"115android"},{label:"iOS",value:"115ios"},{label:"网页",value:"web"},{label:"PAD",value:"115ipad"},{label:"TV",value:"tv"}];te(()=>me.transfer_monitor_paths,e=>{if(e)try{const l=e.split("\n").filter(e=>e.trim());_e.value=l.map(e=>{const l=e.split("#");return{local:l[0]||"",remote:l[1]||""}}),0===_e.value.length&&(_e.value=[{local:"",remote:""}])}catch(l){console.error("解析transfer_monitor_paths出错:",l),_e.value=[{local:"",remote:""}]}else _e.value=[{local:"",remote:""}]},{immediate:!0}),te(()=>me.transfer_mp_mediaserver_paths,e=>{if(e)try{const l=e.split("\n").filter(e=>e.trim());fe.value=l.map(e=>{const l=e.split("#");return{local:l[0]||"",remote:l[1]||""}}),0===fe.value.length&&(fe.value=[{local:"",remote:""}])}catch(l){console.error("解析transfer_mp_mediaserver_paths出错:",l),fe.value=[{local:"",remote:""}]}else fe.value=[{local:"",remote:""}]},{immediate:!0}),te(()=>me.full_sync_strm_paths,e=>{if(e)try{const l=e.split("\n").filter(e=>e.trim());ve.value=l.map(e=>{const l=e.split("#");return{local:l[0]||"",remote:l[1]||""}}),0===ve.value.length&&(ve.value=[{local:"",remote:""}])}catch(l){console.error("解析full_sync_strm_paths出错:",l),ve.value=[{local:"",remote:""}]}else ve.value=[{local:"",remote:""}]},{immediate:!0}),te(()=>me.increment_sync_strm_paths,e=>{if(e)try{const l=e.split("\n").filter(e=>e.trim());ye.value=l.map(e=>{const l=e.split("#");return{local:l[0]||"",remote:l[1]||""}}),0===ye.value.length&&(ye.value=[{local:"",remote:""}])}catch(l){console.error("解析increment_sync_strm_paths出错:",l),ye.value=[{local:"",remote:""}]}else ye.value=[{local:"",remote:""}]},{immediate:!0}),te(()=>me.increment_sync_mp_mediaserver_paths,e=>{if(e)try{const l=e.split("\n").filter(e=>e.trim());he.value=l.map(e=>{const l=e.split("#");return{local:l[0]||"",remote:l[1]||""}}),0===he.value.length&&(he.value=[{local:"",remote:""}])}catch(l){console.error("解析increment_sync_mp_mediaserver_paths出错:",l),he.value=[{local:"",remote:""}]}else he.value=[{local:"",remote:""}]},{immediate:!0}),te(()=>me.monitor_life_paths,e=>{if(e)try{const l=e.split("\n").filter(e=>e.trim());be.value=l.map(e=>{const l=e.split("#");return{local:l[0]||"",remote:l[1]||""}}),0===be.value.length&&(be.value=[{local:"",remote:""}])}catch(l){console.error("解析monitor_life_paths出错:",l),be.value=[{local:"",remote:""}]}else be.value=[{local:"",remote:""}]},{immediate:!0}),te(()=>me.monitor_life_mp_mediaserver_paths,e=>{if(e)try{const l=e.split("\n").filter(e=>e.trim());ge.value=l.map(e=>{const l=e.split("#");return{local:l[0]||"",remote:l[1]||""}}),0===ge.value.length&&(ge.value=[{local:"",remote:""}])}catch(l){console.error("解析monitor_life_mp_mediaserver_paths出错:",l),ge.value=[{local:"",remote:""}]}else ge.value=[{local:"",remote:""}]},{immediate:!0}),te(()=>me.pan_transfer_paths,e=>{if(e)try{const l=e.split("\n").filter(e=>e.trim());xe.value=l.map(e=>({path:e})),0===xe.value.length&&(xe.value=[{path:""}])}catch(l){console.error("解析pan_transfer_paths出错:",l),xe.value=[{path:""}]}else xe.value=[{path:""}]},{immediate:!0}),te(()=>me.transfer_monitor_scrape_metadata_exclude_paths,e=>{if("string"==typeof e&&e.trim())try{const l=e.split("\n").filter(e=>e.trim());Ve.value=l.map(e=>({path:e})),0===Ve.value.length&&(Ve.value=[{path:""}])}catch(l){console.error("解析 transfer_monitor_scrape_metadata_exclude_paths 出错:",l),Ve.value=[{path:""}]}else Ve.value=[{path:""}]},{immediate:!0}),te(Ve,e=>{if(!Array.isArray(e))return;const l=e.map(e=>e.path?.trim()).filter(e=>e).join("\n");me.transfer_monitor_scrape_metadata_exclude_paths!==l&&(me.transfer_monitor_scrape_metadata_exclude_paths=l)},{deep:!0}),te(()=>me.increment_sync_scrape_metadata_exclude_paths,e=>{if("string"==typeof e&&e.trim())try{const l=e.split("\n").filter(e=>e.trim());ke.value=l.map(e=>({path:e})),0===ke.value.length&&(ke.value=[{path:""}])}catch(l){console.error("解析 increment_sync_scrape_metadata_exclude_paths 出错:",l),ke.value=[{path:""}]}else ke.value=[{path:""}]},{immediate:!0}),te(ke,e=>{if(!Array.isArray(e))return;const l=e.map(e=>e.path?.trim()).filter(e=>e).join("\n");me.increment_sync_scrape_metadata_exclude_paths!==l&&(me.increment_sync_scrape_metadata_exclude_paths=l)},{deep:!0}),te(()=>me.monitor_life_scrape_metadata_exclude_paths,e=>{if("string"==typeof e&&e.trim())try{const l=e.split("\n").filter(e=>e.trim());we.value=l.map(e=>({path:e})),0===we.value.length&&(we.value=[{path:""}])}catch(l){console.error("解析 monitor_life_scrape_metadata_exclude_paths 出错:",l),we.value=[{path:""}]}else we.value=[{path:""}]},{immediate:!0}),te(we,e=>{if(!Array.isArray(e))return;const l=e.map(e=>e.path?.trim()).filter(e=>e).join("\n");me.monitor_life_scrape_metadata_exclude_paths!==l&&(me.monitor_life_scrape_metadata_exclude_paths=l)},{deep:!0});const Me=(e,l)=>e.map(e=>"panTransfer"===l?e.path?.trim():`${e.local?.trim()}#${e.remote?.trim()}`).filter(e=>"panTransfer"===l?e&&""!==e:"#"!==e&&""!==e).join("\n"),ze=async()=>{ie.value=!0,pe.text="",pe.type="info";try{me.transfer_monitor_paths=Me(_e.value,"transfer"),me.transfer_mp_mediaserver_paths=Me(fe.value,"mp"),me.full_sync_strm_paths=Me(ve.value,"fullSync"),me.increment_sync_strm_paths=Me(ye.value,"incrementSync"),me.increment_sync_mp_mediaserver_paths=Me(he.value,"increment-mp"),me.monitor_life_paths=Me(be.value,"monitorLife"),me.monitor_life_mp_mediaserver_paths=Me(ge.value,"monitorLifeMp"),me.pan_transfer_paths=Me(xe.value,"panTransfer"),me.directory_upload_path=Ce.value.filter(e=>e.src?.trim()||e.dest_remote?.trim()||e.dest_local?.trim()),ne("save",JSON.parse(JSON.stringify(me))),pe.text="配置已发送保存请求，请稍候...",pe.type="info"}catch(e){console.error("发送保存事件时出错:",e),pe.text=`发送保存请求时出错: ${e.message||"未知错误"}`,pe.type="error"}finally{ie.value=!1,setTimeout(()=>{"info"!==pe.type&&"error"!==pe.type||(pe.text="")},5e3)}},Pe=async()=>{se.value=!0,pe.text="";try{if(!me.enabled)throw new Error("插件未启用，请先启用插件");if(!me.cookies||""===me.cookies.trim())throw new Error("请先设置115 Cookie");if(me.full_sync_strm_paths=Me(ve.value,"fullSync"),!me.full_sync_strm_paths)throw new Error("请先配置全量同步路径");const e=await le.api.post(`plugin/${oe}/full_sync`);if(!e||0!==e.code)throw new Error(e?.msg||"启动全量同步失败");pe.text=e.msg||"全量同步任务已启动",pe.type="success"}catch(e){pe.text=`启动全量同步失败: ${e.message||"未知错误"}`,pe.type="error",console.error("启动全量同步失败:",e)}finally{se.value=!1}},Re=e=>{switch(e){case"transfer":_e.value.push({local:"",remote:""});break;case"mp":fe.value.push({local:"",remote:""});break;case"fullSync":ve.value.push({local:"",remote:""});break;case"incrementSync":ye.value.push({local:"",remote:""});break;case"increment-mp":he.value.push({local:"",remote:""});break;case"monitorLife":be.value.push({local:"",remote:""});break;case"monitorLifeMp":ge.value.push({local:"",remote:""});break;case"directoryUpload":Ce.value.push({src:"",dest_remote:"",dest_local:"",delete:!1})}},$e=(e,l)=>{switch(l){case"transfer":_e.value.splice(e,1),0===_e.value.length&&(_e.value=[{local:"",remote:""}]);break;case"mp":fe.value.splice(e,1),0===fe.value.length&&(fe.value=[{local:"",remote:""}]);break;case"fullSync":ve.value.splice(e,1),0===ve.value.length&&(ve.value=[{local:"",remote:""}]);break;case"incrementSync":ye.value.splice(e,1),0===ye.value.length&&(ye.value=[{local:"",remote:""}]);break;case"increment-mp":he.value.splice(e,1),0===he.value.length&&(he.value=[{local:"",remote:""}]);break;case"monitorLife":be.value.splice(e,1),0===be.value.length&&(be.value=[{local:"",remote:""}]);break;case"monitorLifeMp":ge.value.splice(e,1),0===ge.value.length&&(ge.value=[{local:"",remote:""}]);break;case"directoryUpload":Ce.value.splice(e,1),0===Ce.value.length&&(Ce.value=[{src:"",dest_remote:"",dest_local:"",delete:!1}])}},Le=()=>{xe.value.push({path:""})},Ee=(e,l,a,t=null)=>{Ue.show=!0,Ue.isLocal="local"===l,Ue.loading=!1,Ue.error=null,Ue.items=[],Ue.index=e,Ue.type=a,Ue.fieldKey=t,Ue.targetConfigKeyForExclusion=null,Ue.originalPathTypeBackup="",Ue.originalIndexBackup=-1,Ue.isLocal,Ue.currentPath="/",Ie()},Ie=async()=>{Ue.loading=!0,Ue.error=null,Ue.items=[];try{if(Ue.isLocal)try{const e=await le.api.post("storage/list",{path:Ue.currentPath||"/",type:"share",flag:"ROOT"});if(!e||!Array.isArray(e))throw new Error("浏览目录失败：无效响应");Ue.items=e.filter(e=>"dir"===e.type).map(e=>({name:e.name,path:e.path,is_dir:!0})).sort((e,l)=>e.name.localeCompare(l.name,void 0,{numeric:!0,sensitivity:"base"}))}catch(e){console.error("浏览本地目录失败:",e),Ue.error=`浏览本地目录失败: ${e.message||"未知错误"}`,Ue.items=[]}else{if(!me.cookies||""===me.cookies.trim())throw new Error("请先设置115 Cookie才能浏览网盘目录");const e=await le.api.get(`plugin/${oe}/browse_dir?path=${encodeURIComponent(Ue.currentPath)}&is_local=${Ue.isLocal}`);if(!e||0!==e.code||!e.items)throw new Error(e?.msg||"获取网盘目录内容失败");Ue.items=e.items.filter(e=>e.is_dir).sort((e,l)=>e.name.localeCompare(l.name,void 0,{numeric:!0,sensitivity:"base"})),Ue.currentPath=e.path||Ue.currentPath}}catch(e){console.error("加载目录内容失败:",e),Ue.error=e.message||"获取目录内容失败",(e.message.includes("Cookie")||e.message.includes("cookie"))&&(Ue.items=[])}finally{Ue.loading=!1}},Be=()=>{const e=Ue.currentPath;if(!Ue.isLocal){if("/"===e)return;let l=e.replace(/\\/g,"/");l.length>1&&l.endsWith("/")&&(l=l.slice(0,-1));const a=l.substring(0,l.lastIndexOf("/"));return Ue.currentPath=""===a?"/":a,void Ie()}if("/"===e||"C:\\"===e||"C:/"===e)return;const l=e.replace(/\\/g,"/"),a=l.split("/").filter(Boolean);0===a.length?Ue.currentPath="/":1===a.length&&l.includes(":")?Ue.currentPath=a[0]+":/":(a.pop(),Ue.currentPath=0===a.length?"/":(l.startsWith("/")?"/":"")+a.join("/")+"/"),Ie()},qe=()=>{if(!Ue.currentPath)return;let e=Ue.currentPath;if("/"===e||/^[a-zA-Z]:[\\\/]$/.test(e)||!e.endsWith("/")&&!e.endsWith("\\\\")||(e=e.slice(0,-1)),"excludePath"===Ue.type&&Ue.targetConfigKeyForExclusion){const l=Ue.targetConfigKeyForExclusion;let a;"transfer_monitor_scrape_metadata_exclude_paths"===l?a=Ve:"monitor_life_scrape_metadata_exclude_paths"===l?a=we:"increment_sync_scrape_metadata_exclude_paths"===l&&(a=ke),a&&(1!==a.value.length||a.value[0].path?a.value.some(l=>l.path===e)?(pe.text="该排除路径已存在。",pe.type="warning",setTimeout(()=>{pe.text=""},3e3)):a.value.push({path:e}):a.value[0]={path:e}),Ue.type=Ue.originalPathTypeBackup,Ue.index=Ue.originalIndexBackup,Ue.targetConfigKeyForExclusion=null,Ue.originalPathTypeBackup="",Ue.originalIndexBackup=-1}else if(Ue.index>=0&&"excludePath"!==Ue.type)switch(Ue.type){case"transfer":Ue.isLocal?_e.value[Ue.index].local=e:_e.value[Ue.index].remote=e;break;case"fullSync":Ue.isLocal?ve.value[Ue.index].local=e:ve.value[Ue.index].remote=e;break;case"incrementSync":Ue.isLocal?ye.value[Ue.index].local=e:ye.value[Ue.index].remote=e;break;case"monitorLife":Ue.isLocal?be.value[Ue.index].local=e:be.value[Ue.index].remote=e;break;case"panTransfer":xe.value[Ue.index].path=e;break;case"directoryUpload":Ue.fieldKey&&Ce.value[Ue.index]&&(Ce.value[Ue.index][Ue.fieldKey]=e)}else"sharePath"===Ue.type&&(Ue.isLocal?me.user_share_local_path=e:me.user_share_pan_path=e);Ae()},Ae=()=>{Ue.show=!1,Ue.items=[],Ue.error=null},je=async()=>{if(!me.cookies)return pe.text="Cookie为空，无法复制。",void(pe.type="warning");try{await navigator.clipboard.writeText(me.cookies),pe.text="Cookie已复制到剪贴板！",pe.type="success"}catch(e){console.error("复制Cookie失败:",e),pe.text="复制Cookie失败。请检查浏览器权限或确保通过HTTPS访问，或尝试手动复制。",pe.type="error"}setTimeout(()=>{"success"!==pe.type&&"warning"!==pe.type&&"error"!==pe.type||(pe.text="")},3e3)},Oe=()=>{Te.show=!0,Te.loading=!1,Te.error=null,Te.qrcode="",Te.uid="",Te.time="",Te.sign="",Se.some(e=>e.value===Te.clientType)||(Te.clientType="alipaymini");const e=Se.find(e=>e.value===Te.clientType);e?Te.tips=`请使用${e.label}扫描二维码登录`:(Te.clientType="alipaymini",Te.tips="请使用支付宝扫描二维码登录"),Te.status="等待扫码",Ke()},Ke=async()=>{Te.loading=!0,Te.error=null,Te.qrcode="",Te.uid="",Te.time="",Te.sign="",console.warn(`【115STRM助手 DEBUG】准备获取二维码，前端选择的 clientType: ${Te.clientType}`);try{const e=await le.api.get(`plugin/${oe}/get_qrcode?client_type=${Te.clientType}`);e&&0===e.code?(Te.uid=e.uid,Te.time=e.time,Te.sign=e.sign,Te.qrcode=e.qrcode,Te.tips=e.tips||"请扫描二维码登录",Te.status="等待扫码",e.client_type&&(Te.clientType=e.client_type),De()):(Te.error=e?.error||"获取二维码失败",console.error("【115STRM助手 DEBUG】获取二维码API调用失败或返回错误码: ",e))}catch(e){Te.error=`获取二维码出错: ${e.message||"未知错误"}`,console.error("【115STRM助手 DEBUG】获取二维码 JS 捕获异常:",e)}finally{Te.loading=!1}},Fe=async()=>{if(Te.uid&&Te.show&&Te.time&&Te.show&&Te.sign&&Te.show)try{const e=await le.api.get(`plugin/${oe}/check_qrcode?uid=${Te.uid}&time=${Te.time}&sign=${Te.sign}&client_type=${Te.clientType}`);e&&0===e.code?"waiting"===e.status?Te.status="等待扫码":"scanned"===e.status?Te.status="已扫码，请在设备上确认":"success"===e.status&&(e.cookie?(Ne(),Te.status="登录成功！",me.cookies=e.cookie,pe.text='登录成功！Cookie已获取，请点击下方"保存配置"按钮保存。',pe.type="success",setTimeout(()=>{Te.show=!1},3e3)):(Te.status="登录似乎成功，但未获取到Cookie",pe.text="登录成功但未获取到Cookie信息，请重试或检查账号。",pe.type="warning",Ne())):e&&-1===e.code&&"登录成功，正在处理..."!==Te.status&&(Ne(),Te.error=e.error||"二维码已失效，请刷新",Te.status="二维码已失效")}catch(e){"登录成功，正在处理..."!==Te.status&&console.error("检查二维码状态JS捕获异常:",e)}},De=()=>{Ne(),Te.checkIntervalId=setInterval(Fe,3e3)},Ne=()=>{Te.checkIntervalId&&(clearInterval(Te.checkIntervalId),Te.checkIntervalId=null)},Je=()=>{switch(Ne(),Te.error=null,Te.clientType){case"alipaymini":Te.tips="请使用支付宝扫描二维码登录";break;case"wechatmini":Te.tips="请使用微信扫描二维码登录";break;case"115android":Te.tips="请使用115安卓客户端扫描登录";break;case"115ios":Te.tips="请使用115 iOS客户端扫描登录";break;case"web":Te.tips="请使用115网页版扫码登录";break;default:const e=Se.find(e=>e.value===Te.clientType);Te.tips=e?`请使用${e.label}扫描二维码登录`:"请扫描二维码登录"}Ke()},Ge=()=>{Ne(),Te.show=!1};ae(()=>{(async()=>{try{re.value=!0;const e=await le.api.get(`plugin/${oe}/get_config`);if(e){Object.assign(me,e),Ce.value=Array.isArray(me.directory_upload_path)&&me.directory_upload_path.length>0?JSON.parse(JSON.stringify(me.directory_upload_path)):[{src:"",dest_remote:"",dest_local:"",delete:!1}],e.mediaservers&&(ce.value=e.mediaservers);const l=new Set;me.transfer_monitor_paths&&me.transfer_monitor_paths.split("\n").map(e=>e.split("#")[0]?.trim()).filter(e=>e).forEach(e=>l.add(e)),me.full_sync_strm_paths&&me.full_sync_strm_paths.split("\n").map(e=>e.split("#")[0]?.trim()).filter(e=>e).forEach(e=>l.add(e)),me.monitor_life_paths&&me.monitor_life_paths.split("\n").map(e=>e.split("#")[0]?.trim()).filter(e=>e).forEach(e=>l.add(e))}}catch(e){console.error("加载配置失败:",e),pe.text=`加载配置失败: ${e.message||"未知错误"}`,pe.type="error"}finally{re.value=!1}})()}),te(()=>Te.clientType,(e,l)=>{e!==l&&Te.show&&(console.log(`【115STRM助手 DEBUG】qrDialog.clientType 从 ${l} 变为 ${e}，准备刷新二维码`),Je())});const We=()=>{window&&window.location&&window.location.origin?(me.moviepilot_address=window.location.origin,pe.text="MoviePilot地址已设置为当前站点地址！",pe.type="success"):(pe.text="无法获取当前站点地址。",pe.type="error"),setTimeout(()=>{"success"!==pe.type&&"error"!==pe.type||(pe.text="")},3e3)},He=e=>{Ue.show=!0,Ue.isLocal=!0,Ue.loading=!1,Ue.error=null,Ue.items=[],Ue.currentPath="/",Ue.originalPathTypeBackup=Ue.type,Ue.originalIndexBackup=Ue.index,Ue.targetConfigKeyForExclusion=e,Ue.type="excludePath",Ue.index=-1,Ie()},Ze=(e,l)=>{let a;"transfer_exclude"===l?a=Ve:"life_exclude"===l?a=we:"increment_exclude"===l&&(a=ke),a&&a.value&&e<a.value.length&&(a.value.splice(e,1),0===a.value.length&&(a.value=[{path:""}]))};return(e,l)=>{const Y=a("v-icon"),ee=a("v-card-title"),le=a("v-alert"),ae=a("v-skeleton-loader"),te=a("v-switch"),oe=a("v-col"),Me=a("v-select"),Ke=a("v-row"),Fe=a("v-text-field"),De=a("v-card-text"),Ne=a("v-card"),Qe=a("v-tab"),Xe=a("v-tabs"),Ye=a("v-divider"),el=a("v-btn"),ll=a("v-window-item"),al=a("VCronField"),tl=a("v-expansion-panel-title"),ol=a("v-expansion-panel-text"),nl=a("v-expansion-panel"),rl=a("v-expansion-panels"),il=a("v-window"),sl=a("v-spacer"),dl=a("v-card-actions"),cl=a("v-progress-circular"),ul=a("v-list-item-title"),ml=a("v-list-item-subtitle"),pl=a("v-list-item"),_l=a("v-list"),fl=a("v-dialog"),vl=a("v-chip"),yl=a("v-chip-group");return s(),p("div",f,[t(Ne,{flat:"",class:"rounded border",style:{display:"flex","flex-direction":"column","max-height":"85vh"}},{default:n(()=>[t(ee,{class:"text-subtitle-1 d-flex align-center px-3 py-1 bg-primary-lighten-5"},{default:n(()=>[t(Y,{icon:"mdi-cog",class:"mr-2",color:"primary",size:"small"}),l[63]||(l[63]=o("span",null,"115网盘STRM助手配置",-1))]),_:1}),t(De,{class:"px-3 py-2",style:{"flex-grow":"1","overflow-y":"auto","padding-bottom":"56px"}},{default:n(()=>[pe.text?(s(),d(le,{key:0,type:pe.type,density:"compact",class:"mb-2 text-caption",variant:"tonal",closable:""},{default:n(()=>[i(r(pe.text),1)]),_:1},8,["type"])):c("",!0),re.value?(s(),d(ae,{key:1,type:"article, actions"})):(s(),p("div",v,[t(Ne,{flat:"",class:"rounded mb-3 border config-card"},{default:n(()=>[t(ee,{class:"text-subtitle-2 d-flex align-center px-3 py-1 bg-primary-lighten-5"},{default:n(()=>[t(Y,{icon:"mdi-cog",class:"mr-2",color:"primary",size:"small"}),l[64]||(l[64]=o("span",null,"基础设置",-1))]),_:1}),t(De,{class:"pa-3"},{default:n(()=>[t(Ke,null,{default:n(()=>[t(oe,{cols:"12",md:"3"},{default:n(()=>[t(te,{modelValue:me.enabled,"onUpdate:modelValue":l[0]||(l[0]=e=>me.enabled=e),label:"启用插件",color:"success",density:"compact"},null,8,["modelValue"])]),_:1}),t(oe,{cols:"12",md:"3"},{default:n(()=>[t(te,{modelValue:me.notify,"onUpdate:modelValue":l[1]||(l[1]=e=>me.notify=e),label:"发送通知",color:"success",density:"compact"},null,8,["modelValue"])]),_:1}),t(oe,{cols:"12",md:"3"},{default:n(()=>[t(Me,{modelValue:me.strm_url_format,"onUpdate:modelValue":l[2]||(l[2]=e=>me.strm_url_format=e),label:"STRM文件URL格式",items:[{title:"pickcode",value:"pickcode"},{title:"pickcode + name",value:"pickname"}],chips:"","closable-chips":""},null,8,["modelValue"])]),_:1}),t(oe,{cols:"12",md:"3"},{default:n(()=>[t(Me,{modelValue:me.link_redirect_mode,"onUpdate:modelValue":l[3]||(l[3]=e=>me.link_redirect_mode=e),label:"直链获取模式",items:[{title:"Cookie",value:"cookie"},{title:"OpenAPI",value:"open"}],chips:"","closable-chips":""},null,8,["modelValue"])]),_:1})]),_:1}),t(Ke,null,{default:n(()=>[t(oe,{cols:"12",md:"6"},{default:n(()=>[t(Fe,{modelValue:me.cookies,"onUpdate:modelValue":l[5]||(l[5]=e=>me.cookies=e),label:"115 Cookie",hint:"点击图标切换显隐、复制或扫码","persistent-hint":"",density:"compact",variant:"outlined","hide-details":"auto",type:ue.value?"text":"password"},{"append-inner":n(()=>[t(Y,{icon:ue.value?"mdi-eye-off":"mdi-eye",onClick:l[4]||(l[4]=e=>ue.value=!ue.value),"aria-label":ue.value?"隐藏Cookie":"显示Cookie",title:ue.value?"隐藏Cookie":"显示Cookie",class:"mr-1",size:"small"},null,8,["icon","aria-label","title"]),t(Y,{icon:"mdi-content-copy",onClick:je,disabled:!me.cookies,"aria-label":"复制Cookie",title:"复制Cookie到剪贴板",size:"small",class:"mr-1"},null,8,["disabled"])]),append:n(()=>[t(Y,{icon:"mdi-qrcode-scan",onClick:Oe,color:me.cookies?"success":"default","aria-label":me.cookies?"更新/更换Cookie (重新扫码)":"扫码获取Cookie",title:me.cookies?"更新/更换Cookie (重新扫码)":"扫码获取Cookie"},null,8,["color","aria-label","title"])]),_:1},8,["modelValue","type"])]),_:1}),t(oe,{cols:"12",md:"6"},{default:n(()=>[t(Fe,{modelValue:me.moviepilot_address,"onUpdate:modelValue":l[6]||(l[6]=e=>me.moviepilot_address=e),label:"MoviePilot 内网访问地址",hint:"点右侧图标自动填充当前站点地址。","persistent-hint":"",density:"compact",variant:"outlined","hide-details":"auto"},{append:n(()=>[t(Y,{icon:"mdi-web",onClick:We,"aria-label":"使用当前站点地址",title:"使用当前站点地址",color:"info"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),t(Ke,null,{default:n(()=>[t(oe,{cols:"12",md:"6"},{default:n(()=>[t(Fe,{modelValue:me.user_rmt_mediaext,"onUpdate:modelValue":l[7]||(l[7]=e=>me.user_rmt_mediaext=e),label:"可整理媒体文件扩展名",hint:"支持的媒体文件扩展名，多个用逗号分隔","persistent-hint":"",density:"compact",variant:"outlined","hide-details":"auto"},null,8,["modelValue"])]),_:1}),t(oe,{cols:"12",md:"6"},{default:n(()=>[t(Fe,{modelValue:me.user_download_mediaext,"onUpdate:modelValue":l[8]||(l[8]=e=>me.user_download_mediaext=e),label:"可下载媒体数据文件扩展名",hint:"下载的字幕等附属文件扩展名，多个用逗号分隔","persistent-hint":"",density:"compact",variant:"outlined","hide-details":"auto"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),t(Ne,{flat:"",class:"rounded mb-3 border config-card"},{default:n(()=>[t(Xe,{modelValue:de.value,"onUpdate:modelValue":l[9]||(l[9]=e=>de.value=e),color:"primary","bg-color":"grey-lighten-3",class:"rounded-t",grow:""},{default:n(()=>[t(Qe,{value:"tab-transfer",class:"text-caption"},{default:n(()=>[t(Y,{size:"small",start:""},{default:n(()=>l[65]||(l[65]=[i("mdi-file-move-outline")])),_:1}),l[66]||(l[66]=i("监控MP整理 "))]),_:1}),t(Qe,{value:"tab-sync",class:"text-caption"},{default:n(()=>[t(Y,{size:"small",start:""},{default:n(()=>l[67]||(l[67]=[i("mdi-sync")])),_:1}),l[68]||(l[68]=i("全量同步 "))]),_:1}),t(Qe,{value:"tab-increment-sync",class:"text-caption"},{default:n(()=>[t(Y,{size:"small",start:""},{default:n(()=>l[69]||(l[69]=[i("mdi-book-sync")])),_:1}),l[70]||(l[70]=i("增量同步 "))]),_:1}),t(Qe,{value:"tab-life",class:"text-caption"},{default:n(()=>[t(Y,{size:"small",start:""},{default:n(()=>l[71]||(l[71]=[i("mdi-calendar-heart")])),_:1}),l[72]||(l[72]=i("监控115生活事件 "))]),_:1}),t(Qe,{value:"tab-cleanup",class:"text-caption"},{default:n(()=>[t(Y,{size:"small",start:""},{default:n(()=>l[73]||(l[73]=[i("mdi-broom")])),_:1}),l[74]||(l[74]=i("定期清理 "))]),_:1}),t(Qe,{value:"tab-pan-transfer",class:"text-caption"},{default:n(()=>[t(Y,{size:"small",start:""},{default:n(()=>l[75]||(l[75]=[i("mdi-transfer")])),_:1}),l[76]||(l[76]=i("网盘整理 "))]),_:1}),t(Qe,{value:"tab-directory-upload",class:"text-caption"},{default:n(()=>[t(Y,{size:"small",start:""},{default:n(()=>l[77]||(l[77]=[i("mdi-upload")])),_:1}),l[78]||(l[78]=i("目录上传 "))]),_:1}),t(Qe,{value:"tab-tg-search",class:"text-caption"},{default:n(()=>[t(Y,{size:"small",start:""},{default:n(()=>l[79]||(l[79]=[i("mdi-tab-search")])),_:1}),l[80]||(l[80]=i("频道搜索 "))]),_:1})]),_:1},8,["modelValue"]),t(Ye),t(il,{modelValue:de.value,"onUpdate:modelValue":l[57]||(l[57]=e=>de.value=e)},{default:n(()=>[t(ll,{value:"tab-transfer"},{default:n(()=>[t(De,null,{default:n(()=>[t(Ke,null,{default:n(()=>[t(oe,{cols:"12",md:"3"},{default:n(()=>[t(te,{modelValue:me.transfer_monitor_enabled,"onUpdate:modelValue":l[10]||(l[10]=e=>me.transfer_monitor_enabled=e),label:"启用",color:"info"},null,8,["modelValue"])]),_:1}),t(oe,{cols:"12",md:"3"},{default:n(()=>[t(te,{modelValue:me.transfer_monitor_scrape_metadata_enabled,"onUpdate:modelValue":l[11]||(l[11]=e=>me.transfer_monitor_scrape_metadata_enabled=e),label:"STRM自动刮削",color:"primary"},null,8,["modelValue"])]),_:1}),t(oe,{cols:"12",md:"3"},{default:n(()=>[t(te,{modelValue:me.transfer_monitor_media_server_refresh_enabled,"onUpdate:modelValue":l[12]||(l[12]=e=>me.transfer_monitor_media_server_refresh_enabled=e),label:"媒体服务器刷新",color:"warning"},null,8,["modelValue"])]),_:1}),t(oe,{cols:"12",md:"3"},{default:n(()=>[t(Me,{modelValue:me.transfer_monitor_mediaservers,"onUpdate:modelValue":l[13]||(l[13]=e=>me.transfer_monitor_mediaservers=e),label:"媒体服务器",items:ce.value,multiple:"",chips:"","closable-chips":""},null,8,["modelValue","items"])]),_:1})]),_:1}),me.transfer_monitor_scrape_metadata_enabled?(s(),d(Ke,{key:0,class:"mt-2 mb-2"},{default:n(()=>[t(oe,{cols:"12"},{default:n(()=>[o("div",y,[(s(!0),p(m,null,u(Ve.value,(e,a)=>(s(),p("div",{key:`transfer-exclude-${a}`,class:"mb-2 d-flex align-center"},[t(Fe,{modelValue:e.path,"onUpdate:modelValue":l=>e.path=l,label:"刮削排除目录",density:"compact",variant:"outlined",readonly:"","hide-details":"",class:"flex-grow-1 mr-2"},null,8,["modelValue","onUpdate:modelValue"]),t(el,{icon:"",size:"small",color:"error",class:"ml-2",onClick:e=>Ze(a,"transfer_exclude"),disabled:!e.path},{default:n(()=>[t(Y,null,{default:n(()=>l[81]||(l[81]=[i("mdi-delete")])),_:1})]),_:2},1032,["onClick","disabled"])]))),128)),t(el,{size:"small","prepend-icon":"mdi-folder-plus-outline",variant:"tonal",class:"mt-1 align-self-start",onClick:l[14]||(l[14]=e=>He("transfer_monitor_scrape_metadata_exclude_paths"))},{default:n(()=>l[82]||(l[82]=[i(" 添加刮削排除目录 ")])),_:1})]),t(le,{density:"compact",variant:"text",color:"info",class:"text-caption pa-0 mt-1"},{default:n(()=>l[83]||(l[83]=[i(" 此处添加的本地目录，在STRM文件生成后将不会自动触发刮削。 ")])),_:1})]),_:1})]),_:1})):c("",!0),t(Ke,null,{default:n(()=>[t(oe,{cols:"12"},{default:n(()=>[o("div",h,[(s(!0),p(m,null,u(_e.value,(e,a)=>(s(),p("div",{key:`transfer-${a}`,class:"mb-2 d-flex align-center"},[o("div",b,[t(Fe,{modelValue:e.local,"onUpdate:modelValue":l=>e.local=l,label:"本地STRM目录",density:"compact","append-icon":"mdi-folder","onClick:append":e=>Ee(a,"local","transfer")},null,8,["modelValue","onUpdate:modelValue","onClick:append"])]),t(Y,null,{default:n(()=>l[84]||(l[84]=[i("mdi-pound")])),_:1}),o("div",g,[t(Fe,{modelValue:e.remote,"onUpdate:modelValue":l=>e.remote=l,label:"网盘媒体库目录",density:"compact","append-icon":"mdi-folder-network","onClick:append":e=>Ee(a,"remote","transfer")},null,8,["modelValue","onUpdate:modelValue","onClick:append"])]),t(el,{icon:"",size:"small",color:"error",class:"ml-2",onClick:e=>$e(a,"transfer")},{default:n(()=>[t(Y,null,{default:n(()=>l[85]||(l[85]=[i("mdi-delete")])),_:1})]),_:2},1032,["onClick"])]))),128)),t(el,{size:"small","prepend-icon":"mdi-plus",variant:"outlined",class:"mt-2 align-self-start",onClick:l[15]||(l[15]=e=>Re("transfer"))},{default:n(()=>l[86]||(l[86]=[i(" 添加路径 ")])),_:1})]),t(le,{type:"info",variant:"tonal",density:"compact",class:"mt-2"},{default:n(()=>l[87]||(l[87]=[i(" 监控MoviePilot整理入库事件，自动在本地对应目录生成STRM文件。"),o("br",null,null,-1),i(" 本地STRM目录：本地STRM文件生成路径 网盘媒体库目录：需要生成本地STRM文件的网盘媒体库路径 ")])),_:1})]),_:1})]),_:1}),t(Ke,null,{default:n(()=>[t(oe,{cols:"12"},{default:n(()=>[o("div",x,[(s(!0),p(m,null,u(fe.value,(e,a)=>(s(),p("div",{key:`mp-${a}`,class:"mb-2 d-flex align-center"},[o("div",V,[t(Fe,{modelValue:e.local,"onUpdate:modelValue":l=>e.local=l,label:"媒体库服务器映射目录",density:"compact"},null,8,["modelValue","onUpdate:modelValue"])]),t(Y,null,{default:n(()=>l[88]||(l[88]=[i("mdi-pound")])),_:1}),o("div",k,[t(Fe,{modelValue:e.remote,"onUpdate:modelValue":l=>e.remote=l,label:"MP映射目录",density:"compact"},null,8,["modelValue","onUpdate:modelValue"])]),t(el,{icon:"",size:"small",color:"error",class:"ml-2",onClick:e=>$e(a,"mp")},{default:n(()=>[t(Y,null,{default:n(()=>l[89]||(l[89]=[i("mdi-delete")])),_:1})]),_:2},1032,["onClick"])]))),128)),t(el,{size:"small","prepend-icon":"mdi-plus",variant:"outlined",class:"mt-2 align-self-start",onClick:l[16]||(l[16]=e=>Re("mp"))},{default:n(()=>l[90]||(l[90]=[i(" 添加路径 ")])),_:1})]),t(le,{type:"info",variant:"tonal",density:"compact",class:"mt-2"},{default:n(()=>l[91]||(l[91]=[i(" 媒体服务器映射路径和MP映射路径不一样时请配置此项，如果不配置则无法正常刷新。"),o("br",null,null,-1),i(" 当映射路径一样时可省略此配置。 ")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(ll,{value:"tab-sync"},{default:n(()=>[t(De,null,{default:n(()=>[o("div",w,[t(Ke,null,{default:n(()=>[t(oe,{cols:"12",md:"4"},{default:n(()=>[t(Me,{modelValue:me.full_sync_overwrite_mode,"onUpdate:modelValue":l[17]||(l[17]=e=>me.full_sync_overwrite_mode=e),label:"覆盖模式",items:[{title:"总是",value:"always"},{title:"从不",value:"never"}],chips:"","closable-chips":""},null,8,["modelValue"])]),_:1}),t(oe,{cols:"12",md:"4"},{default:n(()=>[t(te,{modelValue:me.full_sync_remove_unless_strm,"onUpdate:modelValue":l[18]||(l[18]=e=>me.full_sync_remove_unless_strm=e),label:"清理失效STRM文件",color:"warning"},null,8,["modelValue"])]),_:1}),t(oe,{cols:"12",md:"4"},{default:n(()=>[t(te,{modelValue:me.full_sync_auto_download_mediainfo_enabled,"onUpdate:modelValue":l[19]||(l[19]=e=>me.full_sync_auto_download_mediainfo_enabled=e),label:"下载媒体数据文件",color:"warning"},null,8,["modelValue"])]),_:1})]),_:1}),t(Ke,null,{default:n(()=>[t(oe,{cols:"12",md:"6"},{default:n(()=>[t(te,{modelValue:me.timing_full_sync_strm,"onUpdate:modelValue":l[20]||(l[20]=e=>me.timing_full_sync_strm=e),label:"定期全量同步",color:"info"},null,8,["modelValue"])]),_:1}),t(oe,{cols:"12",md:"6"},{default:n(()=>[t(al,{modelValue:me.cron_full_sync_strm,"onUpdate:modelValue":l[21]||(l[21]=e=>me.cron_full_sync_strm=e),label:"运行全量同步周期",hint:"设置全量同步的执行周期","persistent-hint":"",density:"compact"},null,8,["modelValue"])]),_:1})]),_:1}),t(Ke,null,{default:n(()=>[t(oe,{cols:"12"},{default:n(()=>[o("div",C,[(s(!0),p(m,null,u(ve.value,(e,a)=>(s(),p("div",{key:`full-${a}`,class:"mb-2 d-flex align-center"},[o("div",U,[t(Fe,{modelValue:e.local,"onUpdate:modelValue":l=>e.local=l,label:"本地STRM目录",density:"compact","append-icon":"mdi-folder","onClick:append":e=>Ee(a,"local","fullSync")},null,8,["modelValue","onUpdate:modelValue","onClick:append"])]),t(Y,null,{default:n(()=>l[92]||(l[92]=[i("mdi-pound")])),_:1}),o("div",T,[t(Fe,{modelValue:e.remote,"onUpdate:modelValue":l=>e.remote=l,label:"网盘媒体库目录",density:"compact","append-icon":"mdi-folder-network","onClick:append":e=>Ee(a,"remote","fullSync")},null,8,["modelValue","onUpdate:modelValue","onClick:append"])]),t(el,{icon:"",size:"small",color:"error",class:"ml-2",onClick:e=>$e(a,"fullSync")},{default:n(()=>[t(Y,null,{default:n(()=>l[93]||(l[93]=[i("mdi-delete")])),_:1})]),_:2},1032,["onClick"])]))),128)),t(el,{size:"small","prepend-icon":"mdi-plus",variant:"outlined",class:"mt-2 align-self-start",onClick:l[22]||(l[22]=e=>Re("fullSync"))},{default:n(()=>l[94]||(l[94]=[i(" 添加路径 ")])),_:1})]),t(le,{type:"info",variant:"tonal",density:"compact",class:"mt-2"},{default:n(()=>l[95]||(l[95]=[i(" 全量扫描配置的网盘目录，并在对应的本地目录生成STRM文件。"),o("br",null,null,-1),i(" 本地STRM目录：本地STRM文件生成路径 网盘媒体库目录：需要生成本地STRM文件的网盘媒体库路径 ")])),_:1})]),_:1})]),_:1})]),t(rl,{variant:"tonal",class:"mt-6"},{default:n(()=>[t(nl,null,{default:n(()=>[t(tl,null,{default:n(()=>[t(Y,{icon:"mdi-tune-variant",class:"mr-2"}),l[96]||(l[96]=i(" 高级配置 "))]),_:1}),t(ol,{class:"pa-4"},{default:n(()=>[t(Ke,null,{default:n(()=>[t(oe,{cols:"12",md:"4"},{default:n(()=>[t(te,{modelValue:me.full_sync_strm_log,"onUpdate:modelValue":l[23]||(l[23]=e=>me.full_sync_strm_log=e),label:"输出STRM同步日志",color:"primary"},null,8,["modelValue"])]),_:1}),t(oe,{cols:"12",md:"4"},{default:n(()=>[t(Fe,{modelValue:me.full_sync_batch_num,"onUpdate:modelValue":l[24]||(l[24]=e=>me.full_sync_batch_num=e),modelModifiers:{number:!0},label:"全量同步批处理数量",type:"number",hint:"每次批量处理的文件/目录数量","persistent-hint":"",density:"compact"},null,8,["modelValue"])]),_:1}),t(oe,{cols:"12",md:"4"},{default:n(()=>[t(Fe,{modelValue:me.full_sync_process_num,"onUpdate:modelValue":l[25]||(l[25]=e=>me.full_sync_process_num=e),modelModifiers:{number:!0},label:"全量同步生成进程数",type:"number",hint:"同时执行同步任务的进程数量","persistent-hint":"",density:"compact"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(ll,{value:"tab-increment-sync"},{default:n(()=>[t(De,null,{default:n(()=>[t(Ke,null,{default:n(()=>[t(oe,{cols:"12",md:"3"},{default:n(()=>[t(te,{modelValue:me.increment_sync_strm_enabled,"onUpdate:modelValue":l[26]||(l[26]=e=>me.increment_sync_strm_enabled=e),label:"启用",color:"warning"},null,8,["modelValue"])]),_:1}),t(oe,{cols:"12",md:"9"},{default:n(()=>[t(al,{modelValue:me.increment_sync_cron,"onUpdate:modelValue":l[27]||(l[27]=e=>me.increment_sync_cron=e),label:"运行增量同步周期",hint:"设置增量同步的执行周期","persistent-hint":"",density:"compact"},null,8,["modelValue"])]),_:1})]),_:1}),t(Ke,null,{default:n(()=>[t(oe,{cols:"12",md:"3"},{default:n(()=>[t(te,{modelValue:me.increment_sync_auto_download_mediainfo_enabled,"onUpdate:modelValue":l[28]||(l[28]=e=>me.increment_sync_auto_download_mediainfo_enabled=e),label:"下载媒体数据文件",color:"warning"},null,8,["modelValue"])]),_:1}),t(oe,{cols:"12",md:"3"},{default:n(()=>[t(te,{modelValue:me.increment_sync_scrape_metadata_enabled,"onUpdate:modelValue":l[29]||(l[29]=e=>me.increment_sync_scrape_metadata_enabled=e),label:"STRM自动刮削",color:"primary"},null,8,["modelValue"])]),_:1}),t(oe,{cols:"12",md:"3"},{default:n(()=>[t(te,{modelValue:me.increment_sync_media_server_refresh_enabled,"onUpdate:modelValue":l[30]||(l[30]=e=>me.increment_sync_media_server_refresh_enabled=e),label:"媒体服务器刷新",color:"warning"},null,8,["modelValue"])]),_:1}),t(oe,{cols:"12",md:"3"},{default:n(()=>[t(Me,{modelValue:me.increment_sync_mediaservers,"onUpdate:modelValue":l[31]||(l[31]=e=>me.increment_sync_mediaservers=e),label:"媒体服务器",items:ce.value,multiple:"",chips:"","closable-chips":""},null,8,["modelValue","items"])]),_:1})]),_:1}),me.increment_sync_scrape_metadata_enabled?(s(),d(Ke,{key:0,class:"mt-2 mb-2"},{default:n(()=>[t(oe,{cols:"12"},{default:n(()=>[o("div",S,[(s(!0),p(m,null,u(ke.value,(e,a)=>(s(),p("div",{key:`increment-exclude-${a}`,class:"mb-2 d-flex align-center"},[t(Fe,{modelValue:e.path,"onUpdate:modelValue":l=>e.path=l,label:"刮削排除目录",density:"compact",variant:"outlined",readonly:"","hide-details":"",class:"flex-grow-1 mr-2"},null,8,["modelValue","onUpdate:modelValue"]),t(el,{icon:"",size:"small",color:"error",class:"ml-2",onClick:e=>Ze(a,"increment_exclude"),disabled:!e.path},{default:n(()=>[t(Y,null,{default:n(()=>l[97]||(l[97]=[i("mdi-delete")])),_:1})]),_:2},1032,["onClick","disabled"])]))),128)),t(el,{size:"small","prepend-icon":"mdi-folder-plus-outline",variant:"tonal",class:"mt-1 align-self-start",onClick:l[32]||(l[32]=e=>He("increment_sync_scrape_metadata_exclude_paths"))},{default:n(()=>l[98]||(l[98]=[i(" 添加刮削排除目录 ")])),_:1})]),t(le,{density:"compact",variant:"text",color:"info",class:"text-caption pa-0 mt-1"},{default:n(()=>l[99]||(l[99]=[i(" 此处添加的本地目录，在STRM文件生成后将不会自动触发刮削。 ")])),_:1})]),_:1})]),_:1})):c("",!0),t(Ke,null,{default:n(()=>[t(oe,{cols:"12"},{default:n(()=>[o("div",M,[(s(!0),p(m,null,u(ye.value,(e,a)=>(s(),p("div",{key:`increment-${a}`,class:"mb-2 d-flex align-center"},[o("div",z,[t(Fe,{modelValue:e.local,"onUpdate:modelValue":l=>e.local=l,label:"本地STRM目录",density:"compact","append-icon":"mdi-folder","onClick:append":e=>Ee(a,"local","incrementSync")},null,8,["modelValue","onUpdate:modelValue","onClick:append"])]),t(Y,null,{default:n(()=>l[100]||(l[100]=[i("mdi-pound")])),_:1}),o("div",P,[t(Fe,{modelValue:e.remote,"onUpdate:modelValue":l=>e.remote=l,label:"网盘媒体库目录",density:"compact","append-icon":"mdi-folder-network","onClick:append":e=>Ee(a,"remote","incrementSync")},null,8,["modelValue","onUpdate:modelValue","onClick:append"])]),t(el,{icon:"",size:"small",color:"error",class:"ml-2",onClick:e=>$e(a,"incrementSync")},{default:n(()=>[t(Y,null,{default:n(()=>l[101]||(l[101]=[i("mdi-delete")])),_:1})]),_:2},1032,["onClick"])]))),128)),t(el,{size:"small","prepend-icon":"mdi-plus",variant:"outlined",class:"mt-2 align-self-start",onClick:l[33]||(l[33]=e=>Re("incrementSync"))},{default:n(()=>l[102]||(l[102]=[i(" 添加路径 ")])),_:1})]),t(le,{type:"info",variant:"tonal",density:"compact",class:"mt-2"},{default:n(()=>l[103]||(l[103]=[i(" 增量扫描配置的网盘目录，并在对应的本地目录生成STRM文件。"),o("br",null,null,-1),i(" 本地STRM目录：本地STRM文件生成路径 网盘媒体库目录：需要生成本地STRM文件的网盘媒体库路径 ")])),_:1})]),_:1})]),_:1}),t(Ke,null,{default:n(()=>[t(oe,{cols:"12"},{default:n(()=>[o("div",R,[(s(!0),p(m,null,u(he.value,(e,a)=>(s(),p("div",{key:`increment-mp-${a}`,class:"mb-2 d-flex align-center"},[o("div",$,[t(Fe,{modelValue:e.local,"onUpdate:modelValue":l=>e.local=l,label:"媒体库服务器映射目录",density:"compact"},null,8,["modelValue","onUpdate:modelValue"])]),t(Y,null,{default:n(()=>l[104]||(l[104]=[i("mdi-pound")])),_:1}),o("div",L,[t(Fe,{modelValue:e.remote,"onUpdate:modelValue":l=>e.remote=l,label:"MP映射目录",density:"compact"},null,8,["modelValue","onUpdate:modelValue"])]),t(el,{icon:"",size:"small",color:"error",class:"ml-2",onClick:e=>$e(a,"increment-mp")},{default:n(()=>[t(Y,null,{default:n(()=>l[105]||(l[105]=[i("mdi-delete")])),_:1})]),_:2},1032,["onClick"])]))),128)),t(el,{size:"small","prepend-icon":"mdi-plus",variant:"outlined",class:"mt-2 align-self-start",onClick:l[34]||(l[34]=e=>Re("increment-mp"))},{default:n(()=>l[106]||(l[106]=[i(" 添加路径 ")])),_:1})]),t(le,{type:"info",variant:"tonal",density:"compact",class:"mt-2"},{default:n(()=>l[107]||(l[107]=[i(" 媒体服务器映射路径和MP映射路径不一样时请配置此项，如果不配置则无法正常刷新。"),o("br",null,null,-1),i(" 当映射路径一样时可省略此配置。 ")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(ll,{value:"tab-life"},{default:n(()=>[t(De,null,{default:n(()=>[t(Ke,null,{default:n(()=>[t(oe,{cols:"12",md:"3"},{default:n(()=>[t(te,{modelValue:me.monitor_life_enabled,"onUpdate:modelValue":l[35]||(l[35]=e=>me.monitor_life_enabled=e),label:"启用",color:"info"},null,8,["modelValue"])]),_:1}),t(oe,{cols:"12",md:"3"},{default:n(()=>[t(Me,{modelValue:me.monitor_life_event_modes,"onUpdate:modelValue":l[36]||(l[36]=e=>me.monitor_life_event_modes=e),label:"处理事件类型",items:[{title:"新增事件",value:"creata"},{title:"删除事件",value:"remove"},{title:"网盘整理",value:"transfer"}],multiple:"",chips:"","closable-chips":""},null,8,["modelValue"])]),_:1}),t(oe,{cols:"12",md:"3"},{default:n(()=>[t(te,{modelValue:me.monitor_life_auto_download_mediainfo_enabled,"onUpdate:modelValue":l[37]||(l[37]=e=>me.monitor_life_auto_download_mediainfo_enabled=e),label:"下载媒体数据文件",color:"warning"},null,8,["modelValue"])]),_:1}),t(oe,{cols:"12",md:"3"},{default:n(()=>[t(te,{modelValue:me.monitor_life_scrape_metadata_enabled,"onUpdate:modelValue":l[38]||(l[38]=e=>me.monitor_life_scrape_metadata_enabled=e),label:"STRM自动刮削",color:"primary"},null,8,["modelValue"])]),_:1})]),_:1}),t(Ke,null,{default:n(()=>[t(oe,{cols:"12",md:"4"},{default:n(()=>[t(te,{modelValue:me.monitor_life_media_server_refresh_enabled,"onUpdate:modelValue":l[39]||(l[39]=e=>me.monitor_life_media_server_refresh_enabled=e),label:"媒体服务器刷新",color:"warning"},null,8,["modelValue"])]),_:1}),t(oe,{cols:"12",md:"8"},{default:n(()=>[t(Me,{modelValue:me.monitor_life_mediaservers,"onUpdate:modelValue":l[40]||(l[40]=e=>me.monitor_life_mediaservers=e),label:"媒体服务器",items:ce.value,multiple:"",chips:"","closable-chips":""},null,8,["modelValue","items"])]),_:1})]),_:1}),me.monitor_life_scrape_metadata_enabled?(s(),d(Ke,{key:0,class:"mt-2 mb-2"},{default:n(()=>[t(oe,{cols:"12"},{default:n(()=>[o("div",E,[(s(!0),p(m,null,u(we.value,(e,a)=>(s(),p("div",{key:`life-exclude-${a}`,class:"mb-2 d-flex align-center"},[t(Fe,{modelValue:e.path,"onUpdate:modelValue":l=>e.path=l,label:"刮削排除目录",density:"compact",variant:"outlined",readonly:"","hide-details":"",class:"flex-grow-1 mr-2"},null,8,["modelValue","onUpdate:modelValue"]),t(el,{icon:"",size:"small",color:"error",class:"ml-2",onClick:e=>Ze(a,"life_exclude"),disabled:!e.path},{default:n(()=>[t(Y,null,{default:n(()=>l[108]||(l[108]=[i("mdi-delete")])),_:1})]),_:2},1032,["onClick","disabled"])]))),128)),t(el,{size:"small","prepend-icon":"mdi-folder-plus-outline",variant:"tonal",class:"mt-1 align-self-start",onClick:l[41]||(l[41]=e=>He("monitor_life_scrape_metadata_exclude_paths"))},{default:n(()=>l[109]||(l[109]=[i(" 添加刮削排除目录 ")])),_:1})]),t(le,{density:"compact",variant:"text",color:"info",class:"text-caption pa-0 mt-1"},{default:n(()=>l[110]||(l[110]=[i(" 此处添加的本地目录，在115生活事件监控生成STRM后将不会自动触发刮削。 ")])),_:1})]),_:1})]),_:1})):c("",!0),t(Ke,null,{default:n(()=>[t(oe,{cols:"12"},{default:n(()=>[o("div",I,[(s(!0),p(m,null,u(be.value,(e,a)=>(s(),p("div",{key:`life-${a}`,class:"mb-2 d-flex align-center"},[o("div",B,[t(Fe,{modelValue:e.local,"onUpdate:modelValue":l=>e.local=l,label:"本地STRM目录",density:"compact","append-icon":"mdi-folder","onClick:append":e=>Ee(a,"local","monitorLife")},null,8,["modelValue","onUpdate:modelValue","onClick:append"])]),t(Y,null,{default:n(()=>l[111]||(l[111]=[i("mdi-pound")])),_:1}),o("div",q,[t(Fe,{modelValue:e.remote,"onUpdate:modelValue":l=>e.remote=l,label:"网盘媒体库目录",density:"compact","append-icon":"mdi-folder-network","onClick:append":e=>Ee(a,"remote","monitorLife")},null,8,["modelValue","onUpdate:modelValue","onClick:append"])]),t(el,{icon:"",size:"small",color:"error",class:"ml-2",onClick:e=>$e(a,"monitorLife")},{default:n(()=>[t(Y,null,{default:n(()=>l[112]||(l[112]=[i("mdi-delete")])),_:1})]),_:2},1032,["onClick"])]))),128)),t(el,{size:"small","prepend-icon":"mdi-plus",variant:"outlined",class:"mt-2 align-self-start",onClick:l[42]||(l[42]=e=>Re("monitorLife"))},{default:n(()=>l[113]||(l[113]=[i(" 添加路径 ")])),_:1})]),t(le,{type:"info",variant:"tonal",density:"compact",class:"mt-2"},{default:n(()=>l[114]||(l[114]=[i(" 监控115生活（上传、移动、接收文件、删除、复制）事件，自动在本地对应目录生成STRM文件或者删除STRM文件。"),o("br",null,null,-1),i(" 本地STRM目录：本地STRM文件生成路径 网盘媒体库目录：需要生成本地STRM文件的网盘媒体库路径 ")])),_:1})]),_:1})]),_:1}),t(Ke,null,{default:n(()=>[t(oe,{cols:"12"},{default:n(()=>[o("div",A,[(s(!0),p(m,null,u(ge.value,(e,a)=>(s(),p("div",{key:`life-mp-${a}`,class:"mb-2 d-flex align-center"},[o("div",j,[t(Fe,{modelValue:e.local,"onUpdate:modelValue":l=>e.local=l,label:"媒体库服务器映射目录",density:"compact"},null,8,["modelValue","onUpdate:modelValue"])]),t(Y,null,{default:n(()=>l[115]||(l[115]=[i("mdi-pound")])),_:1}),o("div",O,[t(Fe,{modelValue:e.remote,"onUpdate:modelValue":l=>e.remote=l,label:"MP映射目录",density:"compact"},null,8,["modelValue","onUpdate:modelValue"])]),t(el,{icon:"",size:"small",color:"error",class:"ml-2",onClick:e=>$e(a,"monitorLifeMp")},{default:n(()=>[t(Y,null,{default:n(()=>l[116]||(l[116]=[i("mdi-delete")])),_:1})]),_:2},1032,["onClick"])]))),128)),t(el,{size:"small","prepend-icon":"mdi-plus",variant:"outlined",class:"mt-2 align-self-start",onClick:l[43]||(l[43]=e=>Re("monitorLifeMp"))},{default:n(()=>l[117]||(l[117]=[i(" 添加路径 ")])),_:1})]),t(le,{type:"info",variant:"tonal",density:"compact",class:"mt-2"},{default:n(()=>l[118]||(l[118]=[i(" 媒体服务器映射路径和MP映射路径不一样时请配置此项，如果不配置则无法正常刷新。"),o("br",null,null,-1),i(" 当映射路径一样时可省略此配置。 ")])),_:1})]),_:1})]),_:1}),t(le,{type:"warning",variant:"tonal",density:"compact",class:"mt-2"},{default:n(()=>l[119]||(l[119]=[i(" 注意：当 MoviePilot 主程序运行整理任务时 115生活事件 监控会自动暂停，整理运行完成后会继续监控。 ")])),_:1})]),_:1})]),_:1}),t(ll,{value:"tab-cleanup"},{default:n(()=>[t(De,null,{default:n(()=>[t(le,{type:"warning",variant:"tonal",density:"compact",class:"mb-4"},{default:n(()=>l[120]||(l[120]=[i(" 注意，清空 回收站/最近接收 后文件不可恢复，如果产生重要数据丢失本程序不负责！ ")])),_:1}),t(Ke,null,{default:n(()=>[t(oe,{cols:"12",md:"3"},{default:n(()=>[t(te,{modelValue:me.clear_recyclebin_enabled,"onUpdate:modelValue":l[44]||(l[44]=e=>me.clear_recyclebin_enabled=e),label:"清空回收站",color:"error"},null,8,["modelValue"])]),_:1}),t(oe,{cols:"12",md:"3"},{default:n(()=>[t(te,{modelValue:me.clear_receive_path_enabled,"onUpdate:modelValue":l[45]||(l[45]=e=>me.clear_receive_path_enabled=e),label:"清空最近接收目录",color:"error"},null,8,["modelValue"])]),_:1}),t(oe,{cols:"12",md:"3"},{default:n(()=>[t(Fe,{modelValue:me.password,"onUpdate:modelValue":l[46]||(l[46]=e=>me.password=e),label:"115访问密码",hint:"115网盘登录密码","persistent-hint":"",type:"password",density:"compact",variant:"outlined","hide-details":"auto"},null,8,["modelValue"])]),_:1}),t(oe,{cols:"12",md:"3"},{default:n(()=>[t(al,{modelValue:me.cron_clear,"onUpdate:modelValue":l[47]||(l[47]=e=>me.cron_clear=e),label:"清理周期",hint:"设置清理任务的执行周期","persistent-hint":"",density:"compact"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),t(ll,{value:"tab-pan-transfer"},{default:n(()=>[t(De,null,{default:n(()=>[t(Ke,null,{default:n(()=>[t(oe,{cols:"12",md:"4"},{default:n(()=>[t(te,{modelValue:me.pan_transfer_enabled,"onUpdate:modelValue":l[48]||(l[48]=e=>me.pan_transfer_enabled=e),label:"启用",color:"info"},null,8,["modelValue"])]),_:1})]),_:1}),t(Ke,null,{default:n(()=>[t(oe,{cols:"12"},{default:n(()=>[o("div",K,[(s(!0),p(m,null,u(xe.value,(e,a)=>(s(),p("div",{key:`pan-${a}`,class:"mb-2 d-flex align-center"},[t(Fe,{modelValue:e.path,"onUpdate:modelValue":l=>e.path=l,label:"网盘待整理目录",density:"compact","append-icon":"mdi-folder-network","onClick:append":e=>Ee(a,"remote","panTransfer"),class:"flex-grow-1"},null,8,["modelValue","onUpdate:modelValue","onClick:append"]),t(el,{icon:"",size:"small",color:"error",class:"ml-2",onClick:e=>(e=>{xe.value.splice(e,1),0===xe.value.length&&(xe.value=[{path:""}])})(a)},{default:n(()=>[t(Y,null,{default:n(()=>l[121]||(l[121]=[i("mdi-delete")])),_:1})]),_:2},1032,["onClick"])]))),128)),t(el,{size:"small","prepend-icon":"mdi-plus",variant:"outlined",class:"mt-2 align-self-start",onClick:Le},{default:n(()=>l[122]||(l[122]=[i(" 添加路径 ")])),_:1})])]),_:1})]),_:1}),t(le,{type:"info",variant:"tonal",density:"compact",class:"mt-2"},{default:n(()=>l[123]||(l[123]=[i(" 使用本功能需要先进入 设定-目录 进行配置："),o("br",null,null,-1),i(" 1. 添加目录配置卡，按需配置媒体类型和媒体类别，资源存储选择115网盘，资源目录输入网盘待整理文件夹"),o("br",null,null,-1),i(" 2. 自动整理模式选择手动整理，媒体库存储依旧选择115网盘，并配置好媒体库路径，整理方式选择移动，按需配置分类、重命名、通知"),o("br",null,null,-1),i(" 3. 配置完成目录设置后只需要在上方 网盘待整理目录 填入 网盘待整理文件夹 即可"),o("br",null,null,-1)])),_:1}),t(le,{type:"warning",variant:"tonal",density:"compact",class:"mt-2"},{default:n(()=>l[124]||(l[124]=[i(" 注意：配置目录时不能选择刮削元数据，否则可能导致风控！ ")])),_:1}),t(le,{type:"warning",variant:"tonal",density:"compact",class:"mt-2"},{default:n(()=>l[125]||(l[125]=[i(" 注意：115生活事件监控默认会忽略网盘整理触发的移动事件，所以推荐使用MP整理事件监控生成STRM ")])),_:1})]),_:1})]),_:1}),t(ll,{value:"tab-directory-upload"},{default:n(()=>[t(De,null,{default:n(()=>[t(Ke,null,{default:n(()=>[t(oe,{cols:"12",md:"4"},{default:n(()=>[t(te,{modelValue:me.directory_upload_enabled,"onUpdate:modelValue":l[49]||(l[49]=e=>me.directory_upload_enabled=e),label:"启用",color:"info",density:"compact","hide-details":""},null,8,["modelValue"])]),_:1}),t(oe,{cols:"12",md:"8"},{default:n(()=>[t(Me,{modelValue:me.directory_upload_mode,"onUpdate:modelValue":l[50]||(l[50]=e=>me.directory_upload_mode=e),label:"监控模式",items:[{title:"兼容模式",value:"compatibility"},{title:"性能模式",value:"fast"}],chips:"","closable-chips":"",density:"compact","hide-details":""},null,8,["modelValue"])]),_:1})]),_:1}),t(Ke,null,{default:n(()=>[t(oe,{cols:"12",md:"6"},{default:n(()=>[t(Fe,{modelValue:me.directory_upload_uploadext,"onUpdate:modelValue":l[51]||(l[51]=e=>me.directory_upload_uploadext=e),label:"上传文件扩展名",hint:"指定哪些扩展名的文件会被上传到115网盘，多个用逗号分隔","persistent-hint":"",density:"compact",variant:"outlined","hide-details":"auto"},null,8,["modelValue"])]),_:1}),t(oe,{cols:"12",md:"6"},{default:n(()=>[t(Fe,{modelValue:me.directory_upload_copyext,"onUpdate:modelValue":l[52]||(l[52]=e=>me.directory_upload_copyext=e),label:"复制文件扩展名",hint:"指定哪些扩展名的文件会被复制到本地目标目录，多个用逗号分隔","persistent-hint":"",density:"compact",variant:"outlined","hide-details":"auto"},null,8,["modelValue"])]),_:1})]),_:1}),t(Ye,{class:"my-3"}),l[131]||(l[131]=o("div",{class:"text-subtitle-2 mb-2"},"路径配置:",-1)),(s(!0),p(m,null,u(Ce.value,(e,a)=>(s(),p("div",{key:`upload-${a}`,class:"path-group mb-3 pa-2 border rounded"},[t(Ke,{dense:""},{default:n(()=>[t(oe,{cols:"12",md:"6"},{default:n(()=>[t(Fe,{modelValue:e.src,"onUpdate:modelValue":l=>e.src=l,label:"本地监控目录",density:"compact",variant:"outlined","hide-details":"","append-icon":"mdi-folder-search-outline","onClick:append":e=>Ee(a,"local","directoryUpload","src")},{"prepend-inner":n(()=>[t(Y,{color:"blue"},{default:n(()=>l[126]||(l[126]=[i("mdi-folder-table")])),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue","onClick:append"])]),_:2},1024),t(oe,{cols:"12",md:"6"},{default:n(()=>[t(Fe,{modelValue:e.dest_remote,"onUpdate:modelValue":l=>e.dest_remote=l,label:"网盘上传目标目录",density:"compact",variant:"outlined","hide-details":"","append-icon":"mdi-folder-network-outline","onClick:append":e=>Ee(a,"remote","directoryUpload","dest_remote")},{"prepend-inner":n(()=>[t(Y,{color:"green"},{default:n(()=>l[127]||(l[127]=[i("mdi-cloud-upload")])),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue","onClick:append"])]),_:2},1024)]),_:2},1024),t(Ke,{dense:"",class:"mt-1"},{default:n(()=>[t(oe,{cols:"12",md:"6"},{default:n(()=>[t(Fe,{modelValue:e.dest_local,"onUpdate:modelValue":l=>e.dest_local=l,label:"本地复制目标目录 (可选)",density:"compact",variant:"outlined","hide-details":"","append-icon":"mdi-folder-plus-outline","onClick:append":e=>Ee(a,"local","directoryUpload","dest_local")},{"prepend-inner":n(()=>[t(Y,{color:"orange"},{default:n(()=>l[128]||(l[128]=[i("mdi-content-copy")])),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue","onClick:append"])]),_:2},1024),t(oe,{cols:"12",md:"4",class:"d-flex align-center"},{default:n(()=>[t(te,{modelValue:e.delete,"onUpdate:modelValue":l=>e.delete=l,label:"处理后删除源文件",color:"error",density:"compact","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),t(oe,{cols:"12",md:"2",class:"d-flex align-center justify-end"},{default:n(()=>[t(el,{icon:"mdi-delete-outline",size:"small",color:"error",variant:"text",title:"删除此路径配置",onClick:e=>$e(a,"directoryUpload")},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]))),128)),t(el,{size:"small","prepend-icon":"mdi-plus-box-multiple-outline",variant:"tonal",class:"mt-2",color:"primary",onClick:l[53]||(l[53]=e=>Re("directoryUpload"))},{default:n(()=>l[129]||(l[129]=[i(" 添加监控路径组 ")])),_:1}),t(le,{type:"info",variant:"tonal",density:"compact",class:"mt-3 text-caption"},{default:n(()=>l[130]||(l[130]=[o("strong",null,"功能说明:",-1),o("br",null,null,-1),i(' - 监控指定的"本地监控目录"。'),o("br",null,null,-1),i(" - 当目录中出现新文件时："),o("br",null,null,-1),i('   - 如果文件扩展名匹配"上传文件扩展名"，则将其上传到对应的"网盘上传目标目录"。'),o("br",null,null,-1),i('   - 如果文件扩展名匹配"复制文件扩展名"，则将其复制到对应的"本地复制目标目录"。'),o("br",null,null,-1),i(' - 处理完成后，如果"删除源文件"开关打开，则会删除原始文件。'),o("br",null,null,-1),i(" - 扩展名不匹配的文件将被忽略。"),o("br",null,null,-1),o("strong",null,"注意:",-1),o("br",null,null,-1),i(" - 请确保MoviePilot对本地目录有读写权限，对网盘目录有写入权限。"),o("br",null,null,-1),i(' - "本地复制目标目录"是可选的，如果不填，则仅执行上传操作（如果匹配）。'),o("br",null,null,-1),i(' - 监控模式："兼容模式"适用于Docker或网络共享目录（如SMB），性能较低；"性能模式"仅适用于物理路径，性能较高。 ')])),_:1})]),_:1})]),_:1}),t(ll,{value:"tab-tg-search"},{default:n(()=>[t(De,null,{default:n(()=>[t(Ke,null,{default:n(()=>[t(oe,{cols:"12",md:"4"},{default:n(()=>[t(Fe,{modelValue:me.cloudsaver_url,"onUpdate:modelValue":l[54]||(l[54]=e=>me.cloudsaver_url=e),label:"CloudSaver 地址",hint:"CloudSaver 地址","persistent-hint":"",density:"compact",variant:"outlined","hide-details":"auto"},null,8,["modelValue"])]),_:1}),t(oe,{cols:"12",md:"4"},{default:n(()=>[t(Fe,{modelValue:me.cloudsaver_username,"onUpdate:modelValue":l[55]||(l[55]=e=>me.cloudsaver_username=e),label:"CloudSaver 用户名",hint:"CloudSaver 用户名","persistent-hint":"",density:"compact",variant:"outlined","hide-details":"auto"},null,8,["modelValue"])]),_:1}),t(oe,{cols:"12",md:"4"},{default:n(()=>[t(Fe,{modelValue:me.cloudsaver_password,"onUpdate:modelValue":l[56]||(l[56]=e=>me.cloudsaver_password=e),label:"CloudSaver 密码",hint:"CloudSaver 密码","persistent-hint":"",type:"password",density:"compact",variant:"outlined","hide-details":"auto"},null,8,["modelValue"])]),_:1})]),_:1}),t(le,{type:"info",variant:"tonal",density:"compact",class:"mt-3 text-caption"},{default:n(()=>l[132]||(l[132]=[o("strong",null,"功能说明:",-1),o("br",null,null,-1),i(" - TG频道搜索目前通过对接 https://github.com/jiangrui1994/CloudSaver 实现。"),o("br",null,null,-1),i(" - 需要配置完成 CloudSaver 地址，用户名与密码方可使用 Telegram 频道搜索功能。"),o("br",null,null,-1)])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]))]),_:1}),t(dl,{class:"px-3 py-2 d-flex",style:{"flex-shrink":"0"}},{default:n(()=>[t(el,{color:"warning",variant:"text",onClick:l[58]||(l[58]=e=>ne("switch")),size:"small","prepend-icon":"mdi-arrow-left"},{default:n(()=>l[133]||(l[133]=[i(" 返回 ")])),_:1}),t(sl),t(el,{color:"warning",variant:"text",onClick:Pe,loading:se.value,size:"small","prepend-icon":"mdi-sync"},{default:n(()=>l[134]||(l[134]=[i(" 全量同步 ")])),_:1},8,["loading"]),t(el,{color:"success",variant:"text",onClick:ze,loading:ie.value,size:"small","prepend-icon":"mdi-content-save"},{default:n(()=>l[135]||(l[135]=[i(" 保存配置 ")])),_:1},8,["loading"])]),_:1})]),_:1}),t(fl,{modelValue:Ue.show,"onUpdate:modelValue":l[60]||(l[60]=e=>Ue.show=e),"max-width":"800"},{default:n(()=>[t(Ne,null,{default:n(()=>[t(ee,{class:"text-subtitle-1 d-flex align-center px-3 py-2 bg-primary-lighten-5"},{default:n(()=>[t(Y,{icon:Ue.isLocal?"mdi-folder-search":"mdi-folder-network",class:"mr-2",color:"primary"},null,8,["icon"]),o("span",null,r(Ue.isLocal?"选择本地目录":"选择网盘目录"),1)]),_:1}),t(De,{class:"px-3 py-2"},{default:n(()=>[Ue.loading?(s(),p("div",F,[t(cl,{indeterminate:"",color:"primary"})])):(s(),p("div",D,[t(Fe,{modelValue:Ue.currentPath,"onUpdate:modelValue":l[59]||(l[59]=e=>Ue.currentPath=e),label:"当前路径",variant:"outlined",density:"compact",class:"mb-2",onKeyup:_(Ie,["enter"])},null,8,["modelValue"]),t(_l,{class:"border rounded","max-height":"300px","overflow-y":"auto"},{default:n(()=>["/"!==Ue.currentPath&&"C:\\"!==Ue.currentPath&&"C:/"!==Ue.currentPath?(s(),d(pl,{key:0,onClick:Be,class:"py-1"},{prepend:n(()=>[t(Y,{icon:"mdi-arrow-up",size:"small",class:"mr-2",color:"grey"})]),default:n(()=>[t(ul,{class:"text-body-2"},{default:n(()=>l[136]||(l[136]=[i("上级目录")])),_:1}),t(ml,null,{default:n(()=>l[137]||(l[137]=[i("..")])),_:1})]),_:1})):c("",!0),(s(!0),p(m,null,u(Ue.items,(e,l)=>(s(),d(pl,{key:l,onClick:l=>(e=>{e&&e.is_dir&&e.path&&(Ue.currentPath=e.path,Ie())})(e),disabled:!e.is_dir,class:"py-1"},{prepend:n(()=>[t(Y,{icon:e.is_dir?"mdi-folder":"mdi-file",size:"small",class:"mr-2",color:e.is_dir?"amber-darken-2":"blue"},null,8,["icon","color"])]),default:n(()=>[t(ul,{class:"text-body-2"},{default:n(()=>[i(r(e.name),1)]),_:2},1024)]),_:2},1032,["onClick","disabled"]))),128)),Ue.items.length?c("",!0):(s(),d(pl,{key:1,class:"py-2 text-center"},{default:n(()=>[t(ul,{class:"text-body-2 text-grey"},{default:n(()=>l[138]||(l[138]=[i("该目录为空或访问受限")])),_:1})]),_:1}))]),_:1})])),Ue.error?(s(),d(le,{key:2,type:"error",density:"compact",class:"mt-2 text-caption",variant:"tonal"},{default:n(()=>[i(r(Ue.error),1)]),_:1})):c("",!0)]),_:1}),t(dl,{class:"px-3 py-2"},{default:n(()=>[t(sl),t(el,{color:"primary",onClick:qe,disabled:!Ue.currentPath||Ue.loading,variant:"text",size:"small"},{default:n(()=>l[139]||(l[139]=[i(" 选择当前目录 ")])),_:1},8,["disabled"]),t(el,{color:"grey",onClick:Ae,variant:"text",size:"small"},{default:n(()=>l[140]||(l[140]=[i(" 取消 ")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(fl,{modelValue:Te.show,"onUpdate:modelValue":l[62]||(l[62]=e=>Te.show=e),"max-width":"450"},{default:n(()=>[t(Ne,null,{default:n(()=>[t(ee,{class:"text-subtitle-1 d-flex align-center px-3 py-2 bg-primary-lighten-5"},{default:n(()=>[t(Y,{icon:"mdi-qrcode",class:"mr-2",color:"primary",size:"small"}),l[141]||(l[141]=o("span",null,"115网盘扫码登录",-1))]),_:1}),t(De,{class:"text-center py-4"},{default:n(()=>[Te.error?(s(),d(le,{key:0,type:"error",density:"compact",class:"mb-3 mx-3",variant:"tonal",closable:""},{default:n(()=>[i(r(Te.error),1)]),_:1})):c("",!0),Te.loading?(s(),p("div",N,[t(cl,{indeterminate:"",color:"primary",class:"mb-3"}),l[142]||(l[142]=o("div",null,"正在获取二维码...",-1))])):Te.qrcode?(s(),p("div",J,[l[145]||(l[145]=o("div",{class:"mb-2 font-weight-medium"},"请选择扫码方式",-1)),t(yl,{modelValue:Te.clientType,"onUpdate:modelValue":l[61]||(l[61]=e=>Te.clientType=e),class:"mb-3",mandatory:"","selected-class":"primary"},{default:n(()=>[(s(),p(m,null,u(Se,e=>t(vl,{key:e.value,value:e.value,variant:"outlined",color:"primary",size:"small"},{default:n(()=>[i(r(e.label),1)]),_:2},1032,["value"])),64))]),_:1},8,["modelValue"]),o("div",G,[t(Ne,{flat:"",class:"border pa-2 mb-2"},{default:n(()=>[o("img",{src:Te.qrcode,width:"220",height:"220"},null,8,W)]),_:1}),o("div",H,r(Te.tips),1),o("div",Z,r(Te.status),1)]),t(el,{color:"primary",variant:"tonal",onClick:Je,size:"small",class:"mb-2"},{default:n(()=>[t(Y,{left:"",size:"small",class:"mr-1"},{default:n(()=>l[143]||(l[143]=[i("mdi-refresh")])),_:1}),l[144]||(l[144]=i("刷新二维码 "))]),_:1})])):(s(),p("div",Q,[t(Y,{icon:"mdi-qrcode-off",size:"64",color:"grey",class:"mb-3"}),l[147]||(l[147]=o("div",{class:"text-subtitle-1"},"二维码获取失败",-1)),l[148]||(l[148]=o("div",{class:"text-body-2 text-grey"},"请点击刷新按钮重试",-1)),o("div",X,[t(Y,{icon:"mdi-alert-circle",size:"small",class:"mr-1 text-warning"}),l[146]||(l[146]=i(" 如果多次获取失败，请检查网络连接 "))])]))]),_:1}),t(Ye),t(dl,{class:"px-3 py-2"},{default:n(()=>[t(el,{color:"grey",variant:"text",onClick:Ge,size:"small","prepend-icon":"mdi-close"},{default:n(()=>l[149]||(l[149]=[i("关闭")])),_:1}),t(sl),t(el,{color:"primary",variant:"text",onClick:Je,disabled:Te.loading,size:"small","prepend-icon":"mdi-refresh"},{default:n(()=>l[150]||(l[150]=[i(" 刷新二维码 ")])),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}},[["__scopeId","data-v-fd34b9e2"]]);export{ne as default};
