# 识别词生成器插件

## 功能描述

本插件根据手动整理时填写的电视剧参数自动生成自定义识别词，支持集数偏移、替换词、屏蔽词等多种格式。

## 主要功能

1. **自动生成识别词**：根据电视剧标题、季号、集数格式等参数自动生成识别词
2. **多种识别词格式支持**：
   - 屏蔽词：直接屏蔽指定词汇
   - 替换词：`被替换词 => 替换词`
   - 集数偏移：`前定位词 <> 后定位词 >> 偏移量（EP）`
   - 组合格式：`被替换词 => 替换词 && 前定位词 <> 后定位词 >> 偏移量（EP）`
3. **API接口**：提供RESTful API接口供外部调用
4. **命令行支持**：支持通过命令行生成识别词

## 使用方法

### 1. 插件配置

在插件配置页面中：
- 启用插件开关
- 设置是否自动生成识别词
- 配置自定义识别词列表

### 2. 参数说明

- **电视剧标题**：电视剧的名称
- **季号**：电视剧的季数（可选）
- **集数定位格式**：用于定位集数的格式，如 `{ep}`、`E{ep}`、`第{ep}集`
- **指定集数**：指定特定的集数，支持范围（如 `1-10`）和列表（如 `1,2,3`）
- **分集标识**：分集的标识符，如 `Part1`、`Part2`
- **集数偏移**：集数的偏移量，如 `+10`、`-5`、`EP*2`

### 3. 生成的识别词类型

#### 季号相关识别词
```
电视剧名称 => 电视剧名称 第2季
电视剧名称 => 电视剧名称 S02
电视剧名称 => 电视剧名称 Season 2
```

#### 集数偏移识别词
```
E <> 集 >> EP+10
第 <> 话 >> EP-5
```

#### 屏蔽词
```
4K
1080P
中英双字
BluRay
```

#### 替换词
```
[.*?] => 
(.*?) => 
Part1 => 
```

### 4. API调用

```bash
curl -X POST "http://localhost:3001/api/v1/plugin/transword/generate_word" \
  -H "Content-Type: application/json" \
  -d '{
    "title": "示例电视剧",
    "season": 2,
    "episode_format": "E{ep}",
    "episode_detail": "1-24",
    "episode_offset": "+10"
  }'
```

### 5. 命令行使用

在MoviePilot中发送命令：
```
/transword
```

## 识别词格式说明

### 屏蔽词
直接输入要屏蔽的词汇，系统会自动忽略包含这些词的内容。

### 替换词
格式：`被替换词 => 替换词`
- `[.*?] => ` - 删除方括号及其内容
- `4K => ` - 删除4K标识
- `中英双字 => 中字` - 将"中英双字"替换为"中字"

### 集数偏移
格式：`前定位词 <> 后定位词 >> 偏移量`
- `E <> 集 >> EP+10` - 在E和集之间的数字加10
- `第 <> 话 >> EP-5` - 在第和话之间的数字减5
- `EP <> . >> EP*2` - 在EP和.之间的数字乘以2

### 组合格式
可以同时使用替换和偏移：
```
中英双字 => 中字 && E <> 集 >> EP+10
```

## 注意事项

1. 生成的识别词需要手动添加到MoviePilot的自定义识别词设置中
2. 集数偏移功能需要准确的前后定位词才能正确工作
3. 建议先在小范围内测试生成的识别词效果
4. 插件会自动过滤常见的视频质量标识和编码信息

## 版本历史

### v1.0.0
- 初始版本
- 支持基本的识别词生成功能
- 提供API接口和命令行支持
- 支持多种识别词格式